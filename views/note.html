<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MeNote</title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/style.css">
    <link rel="stylesheet" type="text/css" href="../stylesheets/note.css">

    <script>
        //TODO 这里应该直接在登录处设置
        var username = '<%- JSON.stringify(username) %>';
        localStorage.setItem('user', JSON.parse(username));

        var files = '<%- JSON.stringify(files) %>';
        files = JSON.parse(files);//存储所有文件名
    </script>
    <script type="text/javascript" src="../javascripts/jquery/jquery.min.js"></script>
</head>
<body>
<div id="webHeader">
    <div id="webTitle">
        <a href="/index"><img src="../images/logo.png"></a>
        <!--这里应该有登出和用户的一些东西-->
    </div>
</div>
<div id="notebook">
    <!--TODO 应该有一些搜索和归类-->
    <!--左边是用户的历史note，右边是写note的地方-->
    <div id="index_container" class="note">
        <ul id="scro1" class="scroll indicator-group-title">
            <li id="add" class="active" onclick="clear()" style="color: rgb(5, 160, 69);font-weight: bolder"><a>Write
                new note!</a></li>
        </ul>
    </div>

    <div id="content" class="note" align="center">
        <div id="title" class="note">
            <label id="title_label">
                Title:
            </label>
            &nbsp;&nbsp;
            <input id="title_space" type="text" placeholder="">
        </div>
        <div id="date" class="note">
            <label id="lastUpdate"></label>
        </div>
        <textarea id="text"></textarea>
        <div>
            <button class="button" name="submit" onclick="saveNote()">save</button>
            &nbsp;&nbsp;
            <button class="button" name="cancel" onclick="">cancel</button>
        </div>
    </div>
</div>
<hr>
<div id="footer" align="center">
    <footer>
        &copy;2017-版权所有 吴宇涵
    </footer>
</div>
</body>
<script>
    var index = document.getElementById("scro1");
    var i = 0;

    function appendIndexItem(itemName) {
        var li = document.createElement("li");
        var a = document.createElement("a");

        a.innerHTML = itemName;

        li.appendChild(a);
        li.setAttribute("id", "no" + i);
        li.setAttribute("onclick", "getNote(" + i + ")");

        return li;
    }

    files.forEach(function (t) {
        var li = appendIndexItem(t);
        index.appendChild(li);
        i++;
    });
</script>
<script type="text/javascript" src="../javascripts/note.js"></script>
</html>